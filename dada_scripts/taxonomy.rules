rule taxonomy_control:
    input:
        "sequenceTables/all.OTUs.tax.seq.RDS",
        "sequenceTables/all.OTUs.tax.seq.tsv"
    output:
        "taxonomy.done"
    threads: 1
    params:
        runtime="00:10:00",
        mem="8G"
    shell:
        """
        touch {output}
        """

rule decipher_taxonomy:
    input:
        "sequenceTables/all.seqTab.RDS"
    output:
        "sequenceTables/all.OTUs.tax.seq.tsv",
        "sequenceTables/all.OTUs.tax.seq.RDS"
    threads: 1
    params:
        mem="8G",
        runtime="120:00:00"
    log: "logs/decipher_taxonomy.log"
    message: "Running decipher on {input}."
    script:
        "{config[dada_src]}/decipher_ID.R"


